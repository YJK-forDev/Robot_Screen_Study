<html>
<body style="margin:0; padding:0; background-color:white; width:100%; height:100%;">
    <img id="myImage" 
         style="width:100%; height:100%; object-fit:contain; display: none;">
    
    <audio id="myAudio">
        <source src="screenimage/Ex_imgs/Scenario2.mp3" type="audio/mpeg">
    </audio>

    <script>
        const audio = document.getElementById('myAudio');
        const img = document.getElementById('myImage');

        const timestamp = new Date().getTime();

        img.src = `screenimage/Ex_imgs/Double_SC2.png?ts=${timestamp}`;

        // 1. watchdog reset은 별도로 계속 돌린다 (1초마다)
        setInterval(() => {
            if (typeof DRDoubleSDK !== 'undefined') {
                DRDoubleSDK.resetWatchdog();
            } else {
                console.log("DRDoubleSDK is not available yet");
            }
        }, 1000);

        // 2. 타이밍 흐름은 setTimeout으로 따로 제어
        // 1.5초 후 오디오 재생
        setTimeout(() => {
            console.log("▶️ 1.5초 후 오디오 재생 시작");
            audio.play().catch(e => console.log("Audio play error:", e));

            // 오디오 재생 후 1초 뒤 이미지 보여주기
            setTimeout(() => {
                console.log("✅ 오디오 시작 1초 후: 이미지 보여주기");
                img.style.display = 'block';

                // 이미지 보여주고 3초 뒤 다시 숨기기
                setTimeout(() => {
                    console.log("🚫 이미지 보이고 3초 후 숨기기");
                    img.style.display = 'none';
                }, 6500);

            }, 2000); // 오디오 시작 1초 후

        }, 0); // 페이지 열리고 1.5초 후
    </script>
</body>
</html>


